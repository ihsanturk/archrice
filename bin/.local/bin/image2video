#!/bin/sh

usage() { echo "Usage: $0 -d <directory> -o <output> -f <fps>" 1>&2; exit 1; }

if [ $# -eq 0 ]; then
  read -p "Directory contains images: " folder
  read -p "Output name: " out
else
  while getopts ":d:o:f:" arg; do
    case $arg in
      d)
        d=${OPTARG}
        ;;
      o)
        o=${OPTARG}
        ;;
      f)
        fps=${OPTARG}
        ;;
      h | *)
        usage;
        exit 2;
        ;;
    esac
  done
fi

if [ -z "${d}" ] || [ -z "${o}" ]; then
  usage
fi

ffmpeg -framerate $fps -r $fps -i ${d}/%04d.png ${o}.mp4 -loglevel quiet
