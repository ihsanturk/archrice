#!/bin/sh

todofile=$HOME/Dropbox/Document/Wiki/todo.wiki

if [ "$1" = "-o" ] || [ "$1" = "--open" ]; then
	$EDITOR $todofile;
elif [ "$1" = "-a" ] || [ "$1" = "--append" ]; then
	$EDITOR $todofile -c "7 | startinsert | norm O "
else
	# Print current todo with hiding the links.
	awk -v RS='' 'NR==4' $todofile | tail -n1 | sed 's/^\t *//g' |
		sed 's/\[\[[^|]*|\(.*\)\]\]/\1/;s/:private://g';
fi
