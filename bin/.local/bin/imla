#!/bin/sh
#
# Created: 2019 --- -- --:--:--
# Updated: 2020 Feb 09 22:38:20  
#
# Requirements:
#   - jq
#   - curl
# If there are any stdin then don't open fzf interactively instead use -f 
# option to print the result.

url='https://sozluk.gov.tr/autocomplete.json'
cachedir=$HOME/.cache/sozlukgovtr
cache=$cachedir/autocomplete
data=/tmp/turkish_autocomplete.json
mkdir -p $cachedir

[ -f $cache ] || [ -f $data ] && cat $data | jq -r '.[].madde' > $cache ||
	curl -so $data $url && cat $data | jq -r '.[].madde' > $cache;
cat $cache | fzf;

# curl "https://sozluk.gov.tr/gts?$phrase" \
# -H 'Accept: application/json' \
